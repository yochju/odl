

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Extending ODL &mdash; odl 0.6.1.dev0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="odl 0.6.1.dev0 documentation" href="../index.html"/>
        <link rel="up" title="Contributing to ODL" href="dev.html"/>
        <link rel="next" title="How to document" href="document.html"/>
        <link rel="prev" title="Contributing to ODL" href="dev.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> odl
          

          
          </a>

          
            
            
              <div class="version">
                0.6.1.dev0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with ODL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guide/guide.html">User’s guide – selected topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/math.html">Mathematical Background</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer zone</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="dev.html">Contributing to ODL</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dev.html#introduction">Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="dev.html#contents">Contents</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Extending ODL</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#adding-fn-spaces">Adding Fn spaces</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="document.html">How to document</a></li>
<li class="toctree-l3"><a class="reference internal" href="testing.html">Testing in ODL</a></li>
<li class="toctree-l3"><a class="reference internal" href="release.html">The ODL release process</a></li>
<li class="toctree-l3"><a class="reference internal" href="gitwash/index.html">Working with ODL source code</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Useful facts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guide/faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../refs.html">References</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../odl.html">odl</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">odl</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="dev.html">Contributing to ODL</a> &raquo;</li>
        
      <li>Extending ODL</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/dev/extend.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="extending-odl">
<span id="dev-extend"></span><h1>Extending ODL<a class="headerlink" href="#extending-odl" title="Permalink to this headline">¶</a></h1>
<p>ODL is written to be easy to extend with new functionality and classes, and new content is welcome.
With that said, not everything fits inside the main library, and some ideas are better realized as <em>extension packages</em>, i.e., packages that use the core ODL library and extend it with experimental features.
This lowers the requirement on code maturity, completeness of documentation, unit tests etc. on your side and allows the core library to stay slim and develop faster.</p>
<p>There are several ways to extend ODL, some of which are listed below.</p>
<div class="section" id="adding-fn-spaces">
<h2>Adding Fn spaces<a class="headerlink" href="#adding-fn-spaces" title="Permalink to this headline">¶</a></h2>
<p>The abstract spaces <a class="reference internal" href="../generated/odl.space.base_ntuples.FnBase.html#odl.space.base_ntuples.FnBase" title="odl.space.base_ntuples.FnBase"><code class="xref any py py-class docutils literal"><span class="pre">FnBase</span></code></a> and <a class="reference internal" href="../generated/odl.space.base_ntuples.NtuplesBase.html#odl.space.base_ntuples.NtuplesBase" title="odl.space.base_ntuples.NtuplesBase"><code class="xref any py py-class docutils literal"><span class="pre">NtuplesBase</span></code></a> are the workhorses of the ODL space machinery. They are used in both the discrete <img class="math" src="../_images/math/b975f81c5760b40a5c41656485644a6b0e4e258f.png" alt="R^n"/> case, as well as data representation for discretized function spaces such as <img class="math" src="../_images/math/a0aeb44b7c9074da1092eb7e3b1eb43d08574be0.png" alt="L^2([0, 1])"/> in the <a class="reference internal" href="../generated/odl.discr.discretization.DiscretizedSpace.html#odl.discr.discretization.DiscretizedSpace" title="odl.discr.discretization.DiscretizedSpace"><code class="xref any py py-class docutils literal"><span class="pre">DiscretizedSpace</span></code></a> class. These are in general created through the <a class="reference internal" href="../generated/odl.space.space_utils.rn.html#odl.space.space_utils.rn" title="odl.space.space_utils.rn"><code class="xref any py py-func docutils literal"><span class="pre">rn</span></code></a> and <a class="reference internal" href="../generated/odl.discr.lp_discr.uniform_discr.html#odl.discr.lp_discr.uniform_discr" title="odl.discr.lp_discr.uniform_discr"><code class="xref any py py-func docutils literal"><span class="pre">uniform_discr</span></code></a> functions who take an <code class="docutils literal"><span class="pre">impl</span></code> parameter, allowing users to select the backend to use.</p>
<p>In the core ODL package, there is only a single backend available: <a class="reference internal" href="../generated/odl.space.npy_ntuples.NumpyFn.html#odl.space.npy_ntuples.NumpyFn" title="odl.space.npy_ntuples.NumpyFn"><code class="xref any py py-class docutils literal"><span class="pre">NumpyFn</span></code></a>/<a class="reference internal" href="../generated/odl.space.npy_ntuples.NumpyNtuples.html#odl.space.npy_ntuples.NumpyNtuples" title="odl.space.npy_ntuples.NumpyNtuples"><code class="xref any py py-class docutils literal"><span class="pre">NumpyNtuples</span></code></a>, given by <code class="docutils literal"><span class="pre">impl='numpy'</span></code>, which is the default choice. Users can add CUDA support by installing the add-on library <a class="reference external" href="https://github.com/odlgroup/odlcuda">odlcuda</a>, which contains the additional spaces <code class="docutils literal"><span class="pre">CudaFn</span></code>/<code class="docutils literal"><span class="pre">CudaNtuples</span></code>. By using the <a class="reference internal" href="../generated/odl.space.space_utils.rn.html#odl.space.space_utils.rn" title="odl.space.space_utils.rn"><code class="xref any py py-func docutils literal"><span class="pre">rn</span></code></a>/<a class="reference internal" href="../generated/odl.discr.lp_discr.uniform_discr.html#odl.discr.lp_discr.uniform_discr" title="odl.discr.lp_discr.uniform_discr"><code class="xref any py py-func docutils literal"><span class="pre">uniform_discr</span></code></a> functions, users can then seamlessly change the backend of their spaces.</p>
<p>As an advanced user, you may need to add additional spaces of this type that can be used inside ODL, perhaps to add <a class="reference external" href="https://en.wikipedia.org/wiki/Message_Passing_Interface">MPI</a> support. There are a few steps to do this:</p>
<ul class="simple">
<li>Create a new library with a <code class="docutils literal"><span class="pre">setuptools</span></code> installer.</li>
<li>Add the spaces that you want to add to the library. The space needs to inherit from <a class="reference internal" href="../generated/odl.space.base_ntuples.NtuplesBase.html#odl.space.base_ntuples.NtuplesBase" title="odl.space.base_ntuples.NtuplesBase"><code class="xref any py py-class docutils literal"><span class="pre">NtuplesBase</span></code></a> or <a class="reference internal" href="../generated/odl.space.base_ntuples.FnBase.html#odl.space.base_ntuples.FnBase" title="odl.space.base_ntuples.FnBase"><code class="xref any py py-class docutils literal"><span class="pre">FnBase</span></code></a>, respectively, and implement all of the abstract methods in those spaces. See the spaces for further information on the specific methods that need to be implemented.</li>
<li>Add the methods <code class="docutils literal"><span class="pre">ntuples_impls()</span></code> and <code class="docutils literal"><span class="pre">fn_impls()</span></code> to a file <code class="docutils literal"><span class="pre">odl_plugin.py</span></code> in your library. These should return a <code class="docutils literal"><span class="pre">dict</span></code> mapping names to implementations.</li>
<li>Add the following to your library’s <code class="docutils literal"><span class="pre">setup.py</span></code> setup call: <code class="docutils literal"><span class="pre">entry_points={'odl.space':</span> <span class="pre">['odl_cuda</span> <span class="pre">=</span> <span class="pre">odlcuda.odl_plugin']</span></code>, where you replace <code class="docutils literal"><span class="pre">odlcuda</span></code> with the name of your plugin.</li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="document.html" class="btn btn-neutral float-right" title="How to document" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dev.html" class="btn btn-neutral" title="Contributing to ODL" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2017, ODL development group.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.6.1.dev0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>